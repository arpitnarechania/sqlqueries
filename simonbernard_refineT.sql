SELECT COUNT(*) FROM ta_test WHERE uniq_id = OLD.uniq_id) = 0;
CREATE TABLE ta_test ('			. 'id INTEGER PRIMARY KEY AUTOINCREMENT, '			. 'uniq_id TEXT, '			. 'name TEXT, '			. 'description TEXT, '			. 'script TEXT, '			. 'tags TEXT, '			. 'last_result TEXT, '			. 'release_id INTEGER NOT NULL, '			. 'created_at TIMESTAMP, '			. 'updated_at TIMESTAMP, '			. 'created_by INTEGER, '			. 'updated_by INTEGER, '			. 'FOREIGN KEY(release_id) REFERENCES ta_release(id))
CREATE TABLE ta_script ('			. 'id INTEGER PRIMARY KEY AUTOINCREMENT, '			. 'uniq_id TEXT, '			. 'name TEXT, '			. 'tags TEXT, '			. 'description TEXT, '			. 'script TEXT, '			. 'release_id INTEGER NOT NULL, '			. 'created_at TIMESTAMP, '			. 'updated_at TIMESTAMP, '			. 'created_by INTEGER, '			. 'updated_by INTEGER, '			. 'FOREIGN KEY(release_id) REFERENCES ta_release(id))
CREATE TABLE ta_run ('			. 'id INTEGER PRIMARY KEY AUTOINCREMENT, '			. 'uniq_id TEXT, '			. 'type TEXT, '			. 'result TEXT, '			. 'script TEXT, '			. 'log TEXT, '			. 'progress INTEGER, '			. 'test_id INTEGER NOT NULL, '			. 'release_id INTEGER NOT NULL, '			. 'env_id INTEGER NOT NULL, '			. 'created_at TIMESTAMP, '			. 'updated_at TIMESTAMP, '			. 'created_by INTEGER, '			. 'updated_by INTEGER, '			. 'FOREIGN KEY(test_id) REFERENCES ta_test(id), '			. 'FOREIGN KEY(release_id) REFERENCES ta_release(id), '			. 'FOREIGN KEY(env_id) REFERENCES ta_env(id))
CREATE TABLE ta_release ('			. 'id INTEGER PRIMARY KEY AUTOINCREMENT, '			. 'uniq_id TEXT, '			. 'name TEXT, '			. 'description TEXT, '			. 'script TEXT, '			. 'archived_at TIMESTAMP, '			. 'copied_at TIMESTAMP, '			. 'copied_from INTEGER, '			. 'created_at TIMESTAMP, '			. 'updated_at TIMESTAMP, '			. 'created_by INTEGER, '			. 'updated_by INTEGER)
UPDATE ta_test SET last_result = NEW WHERE id = NEW
SELECT COUNT(*) FROM users WHERE last_name = "' + person.lastName() + '";
select * from ta_file');
SELECT result FROM ta_run WHERE test_id = OLD.test_id AND updated_at = (SELECT MAX(updated_at) FROM ta_run WHERE test_id = OLD.test_id)) WHERE id = OLD.test_id;
CREATE TABLE ta_file ('			. 'id INTEGER PRIMARY KEY AUTOINCREMENT, '			. 'uniq_id TEXT, '			. 'name TEXT, '			. 'type TEXT, '			. 'size INTEGER, '			. 'asset_id TEXT,'			. 'created_at TIMESTAMP, '			. 'created_by INTEGER)
CREATE TABLE ta_lib ('			. 'id INTEGER PRIMARY KEY AUTOINCREMENT, '			. 'uniq_id TEXT, '			. 'name TEXT, '			. 'type TEXT, '			. 'description TEXT, '			. 'version TEXT, '			. 'script TEXT, '			. 'created_at TIMESTAMP, '			. 'updated_at TIMESTAMP, '			. 'created_by INTEGER, '			. 'updated_by INTEGER)
CREATE TABLE ta_env ('			. 'id INTEGER PRIMARY KEY AUTOINCREMENT, '			. 'uniq_id TEXT, '			. 'name TEXT, '			. 'description TEXT, '			. 'script TEXT, '			. 'status TEXT, '			. 'log TEXT, '			. 'progress INTEGER, '			. 'created_at TIMESTAMP, '			. 'updated_at TIMESTAMP, '			. 'created_by INTEGER, '			. 'updated_by INTEGER)
CREATE TABLE ta_user ('			. 'id INTEGER PRIMARY KEY AUTOINCREMENT, '			. 'uniq_id TEXT, '			. 'mail TEXT, '			. 'name TEXT, '			. 'pwd TEXT, '			. 'type TEXT, '			. 'created_at TIMESTAMP, '			. 'updated_at TIMESTAMP, '			. 'created_by INTEGER, '			. 'updated_by INTEGER)
