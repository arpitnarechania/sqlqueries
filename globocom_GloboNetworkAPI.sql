CREATE TABLE `block_rules` ( `id_block_rules` int(10) NOT NULL AUTO_INCREMENT, `content` text NOT NULL, `id_ambiente` int(10) unsigned NOT NULL, `order` int(10) NOT NULL, PRIMARY KEY (`id_block_rules`), KEY `fk_block_rules_ambiente_idx` (`id_ambiente`), CONSTRAINT `fk_block_rules_ambiente` FOREIGN KEY (`id_ambiente`) REFERENCES `ambiente` (`id_ambiente`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `optionspool_environment_xref` ( `id_optionspool_environment_xref` int(11) NOT NULL AUTO_INCREMENT, `id_optionspool` int(11) NOT NULL, `id_environment` int(10) unsigned NOT NULL, PRIMARY KEY (`id_optionspool_environment_xref`), KEY `fk_options_id_optionspool_idx` (`id_optionspool`), KEY `fk_options_id_environment_idx` (`id_environment`), CONSTRAINT `fk_options_id_optionspool` FOREIGN KEY (`id_optionspool`) REFERENCES `optionspool` (`id_optionspool`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `fk_options_id_environment` FOREIGN KEY (`id_environment`) REFERENCES `ambiente` (`id_ambiente`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `auth_permission` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(50) NOT NULL, `content_type_id` integer NOT NULL, `codename` varchar(100) NOT NULL, UNIQUE (`content_type_id`, `codename`))
CREATE TABLE `config` ( `id_config` tinyint(4) NOT NULL, `ip_v4_min` tinyint(4) NOT NULL, `ip_v4_max` tinyint(4) NOT NULL, `ip_v6_min` tinyint(4) NOT NULL, `ip_v6_max` tinyint(4) NOT NULL, PRIMARY KEY (`id_config`))
CREATE TABLE `object_group_permission` ( `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `id_user_group` INT(10) UNSIGNED NOT NULL COMMENT '', `id_object_type` INT(11) UNSIGNED NOT NULL COMMENT '', `id_object` INT(11) UNSIGNED NULL COMMENT '', `read` TINYINT(1) UNSIGNED NULL COMMENT '', `write` TINYINT(1) UNSIGNED NULL COMMENT '', `change_config` TINYINT(1) UNSIGNED NULL COMMENT '', `delete` TINYINT(1) UNSIGNED NULL COMMENT '', PRIMARY KEY (`id`), INDEX `fk_ogp_id_usergroup_idx` (`id_user_group` ASC), INDEX `fk_ogp_id_object_type_idx` (`id_object_type` ASC), UNIQUE INDEX `uniq_user_group_object` (`id_user_group` ASC, `id_object_type` ASC, `id_object` ASC), CONSTRAINT `fk_ogp_id_usergroup` FOREIGN KEY (`id_user_group`) REFERENCES `grupos` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_ogp_id_object_type` FOREIGN KEY (`id_object_type`) REFERENCES `object_type` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE IF NOT EXISTS `as` ( `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `name` VARCHAR(45) NOT NULL COMMENT '', `description` VARCHAR(200) NULL COMMENT '', PRIMARY KEY (`id`))
CREATE TABLE `object_type` ( `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `name` VARCHAR(45) NOT NULL COMMENT '', PRIMARY KEY (`id`))
CREATE TABLE `vrf_vlan_eqpt` ( `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `id_vrf` INT UNSIGNED NOT NULL COMMENT '', `id_vlan` INT UNSIGNED NOT NULL COMMENT '', `id_equipment` INT UNSIGNED NOT NULL COMMENT '', PRIMARY KEY (`id`), INDEX `fk_vrf_vlan_eqpt_id_vrf_idx` (`id_vrf` ASC), INDEX `fk_vrf_vlan_eqpt_id_vlan_idx` (`id_vlan` ASC), INDEX `fk_vrf_vlan_eqpt_id_eqpt_idx` (`id_equipment` ASC), UNIQUE INDEX `uq_vrf_vlan_eqpt_1` (`id_vlan` ASC, `id_equipment` ASC), CONSTRAINT `fk_vrf_vlan_eqpt_id_vrf` FOREIGN KEY (`id_vrf`) REFERENCES `vrf` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_vrf_vlan_eqpt_id_vlan` FOREIGN KEY (`id_vlan`) REFERENCES `vlans` (`id_vlan`) ON DELETE CASCADE ON UPDATE NO ACTION, CONSTRAINT `fk_vrf_vlan_eqpt_id_eqpt` FOREIGN KEY (`id_equipment`) REFERENCES `equipamentos` (`id_equip`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `django_session` ( `session_key` varchar(40) NOT NULL PRIMARY KEY, `session_data` longtext NOT NULL, `expire_date` datetime NOT NULL)
CREATE TABLE `opcoespool` ( `id_opcaopool` int(11) NOT NULL AUTO_INCREMENT, `description` varchar(200) NOT NULL, PRIMARY KEY (`id_opcaopool`))
CREATE TABLE `permissions` ( `id_permission` int(11) NOT NULL AUTO_INCREMENT, `function` varchar(100) NOT NULL, PRIMARY KEY (`id_permission`), UNIQUE KEY `function_UNIQUE` (`function`))
CREATE TABLE `list_config_bgp` ( `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `name` VARCHAR(100) NOT NULL COMMENT '', `type` ENUM('P', 'A', 'C') NOT NULL DEFAULT 'P' COMMENT '', `config` LONGTEXT NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `aws_vpc` ( `id` INT NOT NULL AUTO_INCREMENT, `vpc_id` VARCHAR(45) NULL, PRIMARY KEY (`id`))
CREATE TABLE `auth_group` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(80) NOT NULL UNIQUE)
CREATE TABLE `grupo_l3` ( `id_grupo_l3` int(10) unsigned NOT NULL AUTO_INCREMENT, `nome` varchar(80) CHARACTER SET latin1 NOT NULL, PRIMARY KEY (`id_grupo_l3`), UNIQUE KEY `nome` (`nome`))
CREATE TABLE `django_content_type` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(100) NOT NULL, `app_label` varchar(100) NOT NULL, `model` varchar(100) NOT NULL, UNIQUE (`app_label`, `model`))
CREATE TABLE `datacenterrooms` ( `id_dcroom` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(200) NOT NULL, `config` longtext, `id_dc` int(10) unsigned NOT NULL, `racks` int(10) unsigned, `spines` int(10) unsigned, `leafs` int(10) unsigned, PRIMARY KEY (`id_dcroom`), UNIQUE KEY `dcrooms_uni` (`name`,`id_dc`), KEY `fk_datacenterrooms_datacenter` (`id_dc`), CONSTRAINT `fk_datacenterrooms_datacenter` FOREIGN KEY (`id_dc`) REFERENCES `datacenter` (`id_dc`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `opcoespool` ( `id_opcaopool` int(11) NOT NULL AUTO_INCREMENT, `description` varchar(200) NOT NULL, PRIMARY KEY (`id_opcaopool`))
SELECT nome_opcao_txt FROM telecom.opcoesvip where tipo_opcao = 'HealthCheck';
CREATE TABLE IF NOT EXISTS `interface_do_ambiente` ( `id_int_ambiente` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, `id_ambiente` INT(10) UNSIGNED NOT NULL, `id_interface` INT(10) UNSIGNED NOT NULL, `vlans` VARCHAR(200) CHARACTER SET `utf8` COLLATE `utf8_unicode_ci` DEFAULT NULL, PRIMARY KEY (`id_int_ambiente`), UNIQUE INDEX `interface_do_ambiente_unique` (`id_ambiente` ASC, `id_interface` ASC), INDEX `fk_interface_do_ambiente_ambiente` (`id_ambiente` ASC), INDEX `fk_interface_do_ambiente_interface` (`id_interface` ASC), CONSTRAINT `interface_do_ambiente_ambiente ` FOREIGN KEY (`id_ambiente`) REFERENCES `ambiente` (`id_ambiente`) ON DELETE RESTRICT ON UPDATE CASCADE, CONSTRAINT `interface_do_ambiente_interface ` FOREIGN KEY (`id_interface`) REFERENCES `interfaces` (`id_interface`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `object_group_permission_general` ( `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `id_user_group` INT(10) UNSIGNED NOT NULL COMMENT '', `id_object_type` INT(11) UNSIGNED NOT NULL COMMENT '', `read` TINYINT(1) UNSIGNED NULL COMMENT '', `write` TINYINT(1) UNSIGNED NULL COMMENT '', `change_config` TINYINT(1) UNSIGNED NULL COMMENT '', `delete` TINYINT(1) UNSIGNED NULL COMMENT '', PRIMARY KEY (`id`), INDEX `fk_ogpg_id_usergroup_idx` (`id_user_group` ASC), INDEX `fk_ogpg_id_object_type_idx` (`id_object_type` ASC), UNIQUE INDEX `uniq_user_group_object_general` (`id_user_group` ASC, `id_object_type` ASC), CONSTRAINT `fk_ogpg_id_usergroup` FOREIGN KEY (`id_user_group`) REFERENCES `grupos` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_ogpg_id_object_type` FOREIGN KEY (`id_object_type`) REFERENCES `object_type` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `config_do_ambiente` ( `id_config_do_ambiente` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_ambiente` int(10) unsigned NOT NULL, `id_ip_config` int(10) NOT NULL, PRIMARY KEY (`id_config_do_ambiente`), UNIQUE KEY `ambiente_ip_config_unique` (`id_ambiente`,`id_ip_config`), KEY `fk_config_do_ambiente_ambiente` (`id_ambiente`), KEY `fk_config_do_ambiente_ip_config` (`id_ip_config`), KEY `unique_ip_config_ambiente` (`id_ambiente`,`id_ip_config`), CONSTRAINT `fk_config_do_ambiente_ambiente` FOREIGN KEY (`id_ambiente`) REFERENCES `ambiente` (`id_ambiente`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_config_do_ambiente_ip_config` FOREIGN KEY (`id_ip_config`) REFERENCES `ip_config` (`id_ip_config`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `dsrl3_to_vip` ( `id_dsrl3_to_vip` int(11) NOT NULL AUTO_INCREMENT, `id_dsrl3` int(11) NOT NULL, `id_requisicao_vips` int(11) NOT NULL, PRIMARY KEY (`id_dsrl3_to_vip`), KEY `fk_dsrl3_to_vip` (`id_requisicao_vips`), CONSTRAINT `fk_dsrl3_to_vip1` FOREIGN KEY (`id_requisicao_vips`) REFERENCES `requisicao_vips` (`id_requisicao_vips`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `ambiente_logico` ( `id_ambiente_logic` int(10) unsigned NOT NULL AUTO_INCREMENT, `nome` varchar(80) CHARACTER SET latin1 NOT NULL, PRIMARY KEY (`id_ambiente_logic`), UNIQUE KEY `nome` (`nome`))
CREATE TABLE `marcas` ( `id_marca` int(10) unsigned NOT NULL AUTO_INCREMENT, `nome` varchar(100) CHARACTER SET latin1 NOT NULL, PRIMARY KEY (`id_marca`), UNIQUE KEY `marca_unica` (`nome`))
CREATE TABLE `equip_do_grupo` ( `id_equip_do_grupo` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_egrupo` int(10) unsigned NOT NULL, `id_equip` int(10) unsigned NOT NULL, PRIMARY KEY (`id_equip_do_grupo`), UNIQUE KEY `uniq_id_egrupo_ud_equip` (`id_egrupo`,`id_equip`), KEY `fk_equip_do_grupo_grupo` (`id_egrupo`), KEY `fk_equip_do_grupo_equipamentos` (`id_equip`), CONSTRAINT `fk_equip_do_grupo_equipamentos` FOREIGN KEY (`id_equip`) REFERENCES `equipamentos` (`id_equip`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `fk_equip_do_grupo_grupo` FOREIGN KEY (`id_egrupo`) REFERENCES `grupos_equip` (`id`) ON UPDATE CASCADE)
CREATE TABLE `interface_do_ambiente` ( `id_int_ambiente` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_ambiente` int(10) unsigned NOT NULL, `id_interface` int(10) unsigned NOT NULL, `vlans` varchar(200) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`id_int_ambiente`), UNIQUE KEY `interface_do_ambiente_unique` (`id_ambiente`,`id_interface`), KEY `fk_ interface_do_ambiente_ambiente` (`id_ambiente`), KEY `fk_ interface_do_ambiente_interface` (`id_interface`), CONSTRAINT `interface_do_ambiente_ambiente?` FOREIGN KEY (`id_ambiente`) REFERENCES `ambiente` (`id_ambiente`) ON UPDATE CASCADE, CONSTRAINT `interface_do_ambiente_interface?` FOREIGN KEY (`id_interface`) REFERENCES `interfaces` (`id_interface`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `tipo_rede` ( `id_tipo_rede` int(10) unsigned NOT NULL AUTO_INCREMENT, `tipo_rede` varchar(100) CHARACTER SET latin1 NOT NULL, PRIMARY KEY (`id_tipo_rede`), UNIQUE KEY `tipo_rede_unico` (`tipo_rede`))
CREATE TABLE IF NOT EXISTS `port_channel` ( `id_port_channel` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, `nome` VARCHAR(100) NOT NULL, `lacp` TINYINT(1) NOT NULL DEFAULT 1, PRIMARY KEY (`id_port_channel`))
CREATE TABLE `vip_request_dscp` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `id_vip_request` INT(11) UNSIGNED NOT NULL COMMENT '', `dscp` INT(2) UNSIGNED NOT NULL COMMENT '', PRIMARY KEY (`id`), INDEX `fk_vip_request_dscp_id_vip_request_idx` (`id_vip_request` ASC), INDEX `vip_request_dscp_idx` (`dscp` ASC), CONSTRAINT `fk_ vip_request_dscp_id_vip_request` FOREIGN KEY (`id_vip_request`) REFERENCES `networkapi`.`vip_request` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `vip_request_optionsvip` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `id_vip_request` INT(11) UNSIGNED NULL COMMENT '', `id_opcoesvip` INT(10) UNSIGNED NULL COMMENT '', PRIMARY KEY (`id`), INDEX `vip_request_optionsvip_id_vip_request_idx` (`id_vip_request` ASC), INDEX `vip_request_optionsvip_id_opcoesvip_idx` (`id_opcoesvip` ASC), CONSTRAINT `vip_request_optionsvip_id_vip_request` FOREIGN KEY (`id_vip_request`) REFERENCES `vip_request` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION, CONSTRAINT `vip_request_optionsvip_id_opcoesvip` FOREIGN KEY (`id_opcoesvip`) REFERENCES `opcoesvip` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `grupos_equip` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `nome` varchar(100) CHARACTER SET latin1 NOT NULL , PRIMARY KEY (`id`))
SELECT * FROM myapp_mymodel WHERE name = 'mateus' FOR UPDATE
CREATE TABLE `vip_request_group_permission` ( `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `id_user_group` INT(10) UNSIGNED NOT NULL COMMENT '', `id_vip_request` INT(11) UNSIGNED NOT NULL COMMENT '', `read` CHAR(1) NOT NULL COMMENT '', `write` CHAR(1) NOT NULL COMMENT '', `change_config` CHAR(1) NOT NULL COMMENT '', `delete` CHAR(1) NOT NULL COMMENT '', PRIMARY KEY (`id`), INDEX `uniq_user_group_vip_request` (`id_user_group` ASC, `id_vip_request` ASC), INDEX `fk_vip_request_gp_id_vip_request_idx` (`id_vip_request` ASC), CONSTRAINT `fk_vip_request_gp_id_vip_request` FOREIGN KEY (`id_vip_request`) REFERENCES `vip_request` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION, CONSTRAINT `fk_vip_request_gp_id_usergroup` FOREIGN KEY (`id_user_group`) REFERENCES `grupos` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `auth_user_groups` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `group_id` integer NOT NULL, UNIQUE (`user_id`, `group_id`))
CREATE TABLE `grupos` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `nome` varchar(100) CHARACTER SET latin1 NOT NULL , `leitura` char(1) NOT NULL, `escrita` char(1) NOT NULL, `edicao` char(1) NOT NULL, `exclusao` char(1) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `nome` (`nome`))
CREATE TABLE `telecom`.`optionspool` ( `id_optionspool` INT NOT NULL, `type` VARCHAR(50) NOT NULL, `description` VARCHAR(50) NOT NULL, PRIMARY KEY (`id_optionspool`))
CREATE TABLE `environment_environment_vip` ( `id` int(11) NOT NULL AUTO_INCREMENT, `environment_id` int(10) unsigned NOT NULL, `environment_vip_id` int(10) unsigned NOT NULL, PRIMARY KEY (`id`), KEY `environment_fk` (`environment_id`), KEY `environment_vip_fk` (`environment_vip_id`), CONSTRAINT `environment_fk` FOREIGN KEY (`environment_id`) REFERENCES `ambiente` (`id_ambiente`), CONSTRAINT `environment_vip_fk` FOREIGN KEY (`environment_vip_id`) REFERENCES `ambientevip` (`id`))
CREATE TABLE `ipsv6` ( `id_ipv6` int(10) unsigned NOT NULL AUTO_INCREMENT, `descricao` varchar(100) DEFAULT NULL, `id_redeipv6` int(10) unsigned NOT NULL, `bloco1` varchar(4) NOT NULL, `bloco2` varchar(4) NOT NULL, `bloco3` varchar(4) NOT NULL, `bloco4` varchar(4) NOT NULL, `bloco5` varchar(4) NOT NULL, `bloco6` varchar(4) NOT NULL, `bloco7` varchar(4) NOT NULL, `bloco8` varchar(4) NOT NULL, PRIMARY KEY (`id_ipv6`), KEY `fk_ipsv6_redeipv6` (`id_redeipv6`), CONSTRAINT `fk_ipsv6_redeipv6` FOREIGN KEY (`id_redeipv6`) REFERENCES `redeipv6` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `vip_port_to_pool` ( `id_vip_port_to_pool` int(11) NOT NULL AUTO_INCREMENT, `id_requisicao_vips` int(11) NOT NULL, `id_server_pool` int(11) NOT NULL, `vip_port` int(10) unsigned NOT NULL, PRIMARY KEY (`id_vip_port_to_pool`), KEY `fk_vip_port_to_pool_requisicao_vips1_idx` (`id_requisicao_vips`), KEY `fk_vip_port_to_pool_server_pool1_idx` (`id_server_pool`), CONSTRAINT `fk_vip_port_to_pool_requisicao_vips1` FOREIGN KEY (`id_requisicao_vips`) REFERENCES `requisicao_vips` (`id_requisicao_vips`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_vip_port_to_pool_server_pool1` FOREIGN KEY (`id_server_pool`) REFERENCES `server_pool` (`id_server_pool`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `filter` ( `id_filter` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, `description` varchar(200) DEFAULT '', PRIMARY KEY (`id_filter`), UNIQUE KEY `name_UNIQUE` (`name`))
CREATE TABLE `route_map` ( `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `name` VARCHAR(45) NOT NULL COMMENT '', PRIMARY KEY (`id`))
CREATE TABLE `ips` ( `id_ip` int(10) unsigned NOT NULL AUTO_INCREMENT, `oct4` tinyint(3) unsigned NOT NULL, `oct3` tinyint(3) unsigned NOT NULL, `oct2` tinyint(3) unsigned NOT NULL, `oct1` tinyint(3) unsigned NOT NULL, `descricao` varchar(100) CHARACTER SET latin1 DEFAULT NULL, `id_redeipv4` int(10) unsigned NOT NULL, PRIMARY KEY (`id_ip`), UNIQUE KEY `ip_da_rede` (`oct1`,`oct2`,`oct3`,`oct4`,`id_redeipv4`), KEY `fk_ips_redeipv4` (`id_redeipv4`), CONSTRAINT `fk_ips_redeipv4` FOREIGN KEY (`id_redeipv4`) REFERENCES `redeipv4` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `equiptos_access` ( `id_equiptos_access` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_equip` int(10) unsigned NOT NULL, `fqdn` varchar(100) NOT NULL, `user` varchar(20) NOT NULL, `pass` varchar(150) DEFAULT NULL, `id_tipo_acesso` int(10) unsigned NOT NULL, `enable_pass` varchar(150) DEFAULT NULL, PRIMARY KEY (`id_equiptos_access`), UNIQUE KEY `unique_id_equip_id_tipo_acesso` (`id_equip`,`id_tipo_acesso`), KEY `fk_equiptos_access_equipamentos` (`id_equip`), KEY `fk_equiptos_access_tipo_acesso` (`id_tipo_acesso`), CONSTRAINT `fk_equiptos_access_equipamentos` FOREIGN KEY (`id_equip`) REFERENCES `equipamentos` (`id_equip`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `fk_equiptos_access_tipo_acesso` FOREIGN KEY (`id_tipo_acesso`) REFERENCES `tipo_acesso` (`id_tipo_acesso`) ON UPDATE CASCADE)
CREATE TABLE `permissoes_administrativas` ( `id_permissoes_administrativas` int(11) NOT NULL AUTO_INCREMENT, `leitura` tinyint(4) NOT NULL DEFAULT '0', `escrita` tinyint(4) NOT NULL DEFAULT '0', `grupos_id` int(10) unsigned NOT NULL, `permission_id` int(11) NOT NULL, PRIMARY KEY (`id_permissoes_administrativas`), KEY `fk_permissoes_administrativas_grupos` (`grupos_id`), KEY `fk_permissoes_administrativas_permissions1_idx` (`permission_id`), CONSTRAINT `fk_permissoes_administrativas_grupos` FOREIGN KEY (`grupos_id`) REFERENCES `grupos` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_permissoes_administrativas_permissions1_idx` FOREIGN KEY (`permission_id`) REFERENCES `permissions` (`id_permission`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `variables` ( `id_variable` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(200) NOT NULL, `value` varchar(200) NOT NULL, `description` varchar(200) default NULL, PRIMARY KEY (`id_variable`), UNIQUE KEY `name` (`name`))
CREATE TABLE `opcoespool_ambiente_xref` ( `id_opcaopool_ambiente_xref` int(11) NOT NULL AUTO_INCREMENT, `id_opcaopool` int(11) NOT NULL, `id_ambiente` int(10) unsigned NOT NULL, PRIMARY KEY (`id_opcaopool_ambiente_xref`), KEY `fk_opcoes_id_opcaopool_idx` (`id_opcaopool`), KEY `fk_opcoes_id_ambiente_idx` (`id_ambiente`), CONSTRAINT `fk_opcoes_id_opcaopool` FOREIGN KEY (`id_opcaopool`) REFERENCES `opcoespool` (`id_opcaopool`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_opcoes_id_ambiente` FOREIGN KEY (`id_ambiente`) REFERENCES `ambiente` (`id_ambiente`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `equiptos_roteiros` ( `id_equiptos_roteiros` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_equip` int(10) unsigned NOT NULL, `id_roteiros` int(10) unsigned NOT NULL, PRIMARY KEY (`id_equiptos_roteiros`), UNIQUE KEY `uniq_equiptos_roteiros` (`id_equip`,`id_roteiros`), KEY `fk_equiptos_roteiros_equipamentos` (`id_equip`), KEY `fk_equiptos_roteiros_roteiros` (`id_roteiros`), CONSTRAINT `fk_equiptos_roteiros_equipamentos` FOREIGN KEY (`id_equip`) REFERENCES `equipamentos` (`id_equip`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `fk_equiptos_roteiros_roteiros` FOREIGN KEY (`id_roteiros`) REFERENCES `roteiros` (`id_roteiros`) ON UPDATE CASCADE)
CREATE TABLE `vrf` ( `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `vrf` VARCHAR(45) NULL COMMENT '', PRIMARY KEY (`id`))
CREATE TABLE `equipment_route_map` ( `id` INT NOT NULL, `id_equipment` INT UNSIGNED NOT NULL, `id_route_map` INT UNSIGNED NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `healthcheck_expect` ( `id_healthcheck_expect` int(10) unsigned NOT NULL AUTO_INCREMENT, `expect_string` varchar(50) NOT NULL, `match_list` varchar(50) NOT NULL, `id_ambiente` int(11) unsigned NOT NULL, PRIMARY KEY (`id_healthcheck_expect`,`id_ambiente`), KEY `fk_healthcheck_expect_ambiente` (`id_ambiente`), CONSTRAINT `fk_healthcheck_expect_ambiente` FOREIGN KEY (`id_ambiente`) REFERENCES `ambiente` (`id_ambiente`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `ips_dos_equipamentos` ( `id_ips_dos_equipamentos` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_ip` int(10) unsigned NOT NULL, `id_equip` int(10) unsigned NOT NULL, PRIMARY KEY (`id_ips_dos_equipamentos`), UNIQUE KEY `uniq_id_ip_id_equip` (`id_ip`,`id_equip`), KEY `fk_ips_has_equipamentos_ips` (`id_ip`), KEY `fk_ips_has_equipamentos_equipamentos` (`id_equip`), CONSTRAINT `fk_ips_has_equipamentos_equipamentos` FOREIGN KEY (`id_equip`) REFERENCES `equipamentos` (`id_equip`) ON UPDATE CASCADE, CONSTRAINT `fk_ips_has_equipamentos_ips` FOREIGN KEY (`id_ip`) REFERENCES `ips` (`id_ip`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `tipo_equipamento` ( `id_tipo_equipamento` int(10) unsigned NOT NULL AUTO_INCREMENT, `tipo_equipamento` varchar(100) CHARACTER SET latin1 NOT NULL, PRIMARY KEY (`id_tipo_equipamento`))
CREATE TABLE IF NOT EXISTS `as_equipment` ( `id` INT NOT NULL COMMENT '', `id_as` INT UNSIGNED NOT NULL COMMENT '', `id_equipment` INT(10) UNSIGNED NOT NULL COMMENT '', PRIMARY KEY (`id`), INDEX `fk_as_equipment_as_idx` (`id_as` ASC), INDEX `fk_as_equipment_equipamentos1_idx` (`id_equipment` ASC), CONSTRAINT `fk_as_equipment_as` FOREIGN KEY (`id_as`) REFERENCES `as` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_as_equipment_equipamentos1` FOREIGN KEY (`id_equipment`) REFERENCES `equipamentos` (`id_equip`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `datacenter` ( `id_dc` int(10) unsigned NOT NULL AUTO_INCREMENT, `dcname` varchar(200) NOT NULL, `address` varchar(200), PRIMARY KEY (`id_dc`), UNIQUE KEY `dcname` (`dcname`))
CREATE TABLE `vrf_eqpt` ( `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `id_vrf` INT UNSIGNED NOT NULL COMMENT '', `id_equipment` INT UNSIGNED NOT NULL COMMENT '', `internal_name` VARCHAR(45) NULL COMMENT '', PRIMARY KEY (`id`), INDEX `fk_vrf_eqpt_id_vrf_idx` (`id_vrf` ASC), INDEX `fk_vrf_eqpt_id_eqpt_idx` (`id_equipment` ASC), UNIQUE INDEX `uq_vrf_eqpt_2` (`id_vrf` ASC, `id_equipment` ASC), CONSTRAINT `fk_vrf_eqpt_id_vrf` FOREIGN KEY (`id_vrf`) REFERENCES `vrf` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_vrf_eqpt_id_eqpt` FOREIGN KEY (`id_equipment`) REFERENCES `equipamentos` (`id_equip`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `peer_group` ( `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `name` VARCHAR(45) NOT NULL COMMENT '', `id_route_map_in` INT(10) UNSIGNED NOT NULL COMMENT '', `id_route_map_out` INT(10) UNSIGNED NOT NULL COMMENT '', INDEX `fk_peer_group_id_route_map_in_idx` (`id_route_map_in` ASC), CONSTRAINT `fk_peer_group_id_route_map_in` FOREIGN KEY (`id_route_map_in`) REFERENCES `route_map` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, INDEX `fk_peer_group_id_route_map_out_idx` (`id_route_map_out` ASC), CONSTRAINT `fk_peer_group_id_route_map_out` FOREIGN KEY (`id_route_map_out`) REFERENCES `route_map` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, PRIMARY KEY (`id`))
CREATE TABLE `filter_equiptype_xref` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_filter` int(10) unsigned NOT NULL, `id_equiptype` int(10) unsigned NOT NULL, PRIMARY KEY (`id`), KEY `fk_filter_equiptype_xref_filter` (`id_filter`), KEY `fk_filter_equiptype_xref_equiptype` (`id_equiptype`), CONSTRAINT `fk_filter_equiptype_xref_equip_type` FOREIGN KEY (`id_equiptype`) REFERENCES `tipo_equipamento` (`id_tipo_equipamento`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_filter_equiptype_xref_filter` FOREIGN KEY (`id_filter`) REFERENCES `filter` (`id_filter`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE IF NOT EXISTS `modelo_roteiro` ( `id_modelo_roteiro` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, `id_roteiro` int(10) unsigned NOT NULL, `id_modelo` int(10) unsigned NOT NULL, PRIMARY KEY (`id_modelo_roteiro`), INDEX `fk_modelo_roteiro_id_roteiro` (`id_roteiro` ASC), INDEX `fk_modelo_roteiro_id_modelo` (`id_modelo` ASC), CONSTRAINT `modelo_roteiro_id_roteiro` FOREIGN KEY (`id_roteiro`) REFERENCES `roteiros` (`id_roteiros`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `modelo_roteiro_id_modelo` FOREIGN KEY (`id_modelo`) REFERENCES `modelos` (`id_modelo`) ON DELETE NO ACTION ON UPDATE NO ACTION)
SELECT tipo_opcao, nome_opcao_txt FROM opcoesvip where tipo_opcao = 'HealthCheck';
CREATE TABLE `equipment_controller_environment` ( `id` INT NOT NULL AUTO_INCREMENT, `id_equipment` INT(10) UNSIGNED NOT NULL, `id_environment` INT(10) UNSIGNED NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `divisao_dc` ( `id_divisao` int(10) unsigned NOT NULL AUTO_INCREMENT, `nome` varchar(100) CHARACTER SET latin1 NOT NULL, PRIMARY KEY (`id_divisao`), UNIQUE KEY `nome` (`nome`))
CREATE TABLE `auth_group_permissions` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `group_id` integer NOT NULL, `permission_id` integer NOT NULL, UNIQUE (`group_id`, `permission_id`))
CREATE TABLE `rule` ( `id_rule` int(10) NOT NULL AUTO_INCREMENT, `id_ambiente` int(10) unsigned NOT NULL, `name` varchar(80) NOT NULL, `id_vip` int(10) DEFAULT NULL, PRIMARY KEY (`id_rule`), KEY `fk_rule_ambiente_idx` (`id_ambiente`), KEY `fk_rule_vip_idx` (`id_vip`), CONSTRAINT `fk_rule_vip` FOREIGN KEY (`id_vip`) REFERENCES `requisicao_vips` (`id_requisicao_vips`) ON DELETE CASCADE ON UPDATE NO ACTION, CONSTRAINT `fk_rule_ambiente` FOREIGN KEY (`id_ambiente`) REFERENCES `ambiente` (`id_ambiente`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE IF NOT EXISTS `virtual_interface` ( `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `name` VARCHAR(45) NULL COMMENT '', PRIMARY KEY (`id`))
CREATE TABLE `equipment_list_config_bgp` ( `id` INT NOT NULL, `id_equipment` INT UNSIGNED NOT NULL, `id_list_config_bgp` INT UNSIGNED NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `tipo_roteiro` ( `id_tipo_roteiro` int(11) NOT NULL AUTO_INCREMENT, `tipo` varchar(40) CHARACTER SET latin1 DEFAULT NULL, `descricao` varchar(100) CHARACTER SET latin1 DEFAULT NULL, PRIMARY KEY (`id_tipo_roteiro`), UNIQUE KEY `tipo` (`tipo`))
SELECT id_ambiente, id_equip FROM networkapi.equip_do_ambiente WHERE is_controller = 1;
CREATE TABLE `server_pool` ( `id_server_pool` int(11) NOT NULL AUTO_INCREMENT, `identifier` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL, `healthcheck_id_healthcheck` int(11) DEFAULT NULL, `service-down-action_id` int(11) DEFAULT '5', `default_port` int(10) unsigned NOT NULL, `default_limit` int(11) DEFAULT NULL, `ambiente_id_ambiente` int(10) unsigned DEFAULT NULL, `pool_criado` tinyint(4) DEFAULT '0', `lb_method` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`id_server_pool`), UNIQUE KEY `fk_server_pool_environment2` (`ambiente_id_ambiente`,`identifier`), KEY `fk_server_pool_healthcheck1_idx` (`healthcheck_id_healthcheck`), CONSTRAINT `fk_server_pool_environment` FOREIGN KEY (`ambiente_id_ambiente`) REFERENCES `ambiente` (`id_ambiente`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_server_pool_healthcheck1` FOREIGN KEY (`healthcheck_id_healthcheck`) REFERENCES `healthcheck` (`id_healthcheck`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `ipsv6_dos_equipamentos` ( `id_ipsv6_dos_equipamentos` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_ipv6` int(10) unsigned NOT NULL, `id_equip` int(10) unsigned NOT NULL, PRIMARY KEY (`id_ipsv6_dos_equipamentos`), UNIQUE KEY `uniq_id_ipv6_id_equip` (`id_ipv6`,`id_equip`), KEY `fk_ipsv6_has_equipamentos_ipsv6` (`id_ipv6`), KEY `fk_ipsv6_has_equipamentos_equipamentos` (`id_equip`), CONSTRAINT `fk_ipsv6_has_equipamentos_equipamentos` FOREIGN KEY (`id_equip`) REFERENCES `equipamentos` (`id_equip`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `dhcprelay_ipv4` ( `id_dhcprelay_ipv4` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_ip` int(10) unsigned NOT NULL, `id_networkipv4` int(10) unsigned NOT NULL, PRIMARY KEY (`id_dhcprelay_ipv4`), UNIQUE KEY `dhcprelayipv4_unique` (`id_ip`,`id_networkipv4`), KEY `fk_dhcprelay_ipv4_id_ip` (`id_ip`), KEY `fk_dhcprelay_ipv4_id_networkipv4` (`id_networkipv4`), CONSTRAINT `fk_dhcprelay_ipv4_id_ip` FOREIGN KEY (`id_ip`) REFERENCES `ips` (`id_ip`) ON UPDATE CASCADE, CONSTRAINT `fk_dhcprelay_ipv4_id_networkipv4` FOREIGN KEY (`id_networkipv4`) REFERENCES `redeipv4` (`id`) ON UPDATE CASCADE)
CREATE TABLE `optionspool` ( `id_optionspool` int(11) NOT NULL AUTO_INCREMENT, `type` varchar(200) NOT NULL, `description` varchar(200) NOT NULL, PRIMARY KEY (`id_optionspool`))
CREATE TABLE `environment_peer_group` ( `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `id_environment` INT(10) UNSIGNED NOT NULL COMMENT '', `id_peer_group` INT(10) UNSIGNED NOT NULL COMMENT '', INDEX `fk_environment_peer_group_id_environment_idx` (`id_environment` ASC), CONSTRAINT `fk_environment_peer_group_id_environment` FOREIGN KEY (`id_environment`) REFERENCES `ambiente` (`id_ambiente`) ON DELETE NO ACTION ON UPDATE NO ACTION, INDEX `fk_environment_peer_group_id_peer_group_idx` (`id_peer_group` ASC), CONSTRAINT `fk_environment_peer_group_id_peer_group` FOREIGN KEY (`id_peer_group`) REFERENCES `peer_group` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, PRIMARY KEY (`id`))
CREATE TABLE `usuarios` ( `user` varchar(45) CHARACTER SET latin1 NOT NULL, `pwd` varchar(45) NOT NULL, `id_user` int(10) unsigned NOT NULL AUTO_INCREMENT, `nome` varchar(200) NOT NULL, `ativo` tinyint(4) NOT NULL DEFAULT '1', `email` varchar(300) NOT NULL, `user_ldap` varchar(45) DEFAULT NULL, PRIMARY KEY (`id_user`), UNIQUE KEY `key_user` (`user`))
CREATE TABLE `django_admin_log` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `action_time` datetime NOT NULL, `user_id` integer NOT NULL, `content_type_id` integer, `object_id` longtext, `object_repr` varchar(200) NOT NULL, `action_flag` smallint UNSIGNED NOT NULL, `change_message` longtext NOT NULL)
CREATE TABLE `server_pool_group_permission` ( `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `id_user_group` INT(10) UNSIGNED NOT NULL COMMENT '', `id_server_pool` INT(11) NOT NULL COMMENT '', `read` CHAR(1) NOT NULL COMMENT '', `write` CHAR(1) NOT NULL COMMENT '', `change_config` CHAR(1) NOT NULL COMMENT '', `delete` CHAR(1) NOT NULL COMMENT '', PRIMARY KEY (`id`), UNIQUE INDEX `uniq_user_group_server_pool` (`id_user_group` ASC, `id_server_pool` ASC), INDEX `fk_server_pool_group_permission_id_server_pool_idx` (`id_server_pool` ASC), CONSTRAINT `fk_server_pool_group_permission_id_server_pool` FOREIGN KEY (`id_server_pool`) REFERENCES `server_pool` (`id_server_pool`) ON DELETE CASCADE ON UPDATE NO ACTION, CONSTRAINT `fk_server_pool_group_permission_id_usergroup` FOREIGN KEY (`id_user_group`) REFERENCES `grupos` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `equip_do_ambiente` ( `id_equip_do_ambiente` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_ambiente` int(10) unsigned NOT NULL, `id_equip` int(10) unsigned NOT NULL, `is_router` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id_equip_do_ambiente`), UNIQUE KEY `uniq_id_ambiente_id_equip` (`id_equip`,`id_ambiente`), KEY `fk_equip_do_ambiente_ambiente` (`id_ambiente`), KEY `fk_equip_do_ambiente_equipamentos` (`id_equip`), CONSTRAINT `fk_equip_do_ambiente_ambiente` FOREIGN KEY (`id_ambiente`) REFERENCES `ambiente` (`id_ambiente`) ON UPDATE CASCADE, CONSTRAINT `fk_equip_do_ambiente_equipamentos` FOREIGN KEY (`id_equip`) REFERENCES `equipamentos` (`id_equip`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `port_channel` ( `id_port_channel` int(10) unsigned NOT NULL AUTO_INCREMENT, `nome` varchar(100) NOT NULL, `lacp` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id_port_channel`))
CREATE TABLE `tipo_interface` ( `id_tipo_interface` int(10) unsigned NOT NULL AUTO_INCREMENT, `tipo` varchar(20) NOT NULL, PRIMARY KEY (`id_tipo_interface`), UNIQUE KEY `tipo_unique` (`tipo`))
CREATE TABLE environment_environment_vip ( id int not null auto_increment, environment_id int(10) unsigned not null, environment_vip_id int(10) unsigned not null, primary key (id), constraint environment_fk foreign key (environment_id) references ambiente(id_ambiente), constraint environment_vip_fk foreign key (environment_vip_id) references ambientevip(id))
CREATE TABLE `optionspool` ( `id_optionspool` int(11) NOT NULL AUTO_INCREMENT, `type` varchar(200) NOT NULL, `description` varchar(200) NOT NULL, PRIMARY KEY (`id_optionspool`), UNIQUE KEY `optionspool_unique` (`type`,`description`))
CREATE TABLE `route_map_entry` ( `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `action` ENUM('P', 'D') NOT NULL DEFAULT 'D' COMMENT '', `action_reconfig` LONGTEXT NULL COMMENT '', `order` INT(10) UNSIGNED NOT NULL COMMENT '', `id_list_config_bgp` INT(10) UNSIGNED NOT NULL COMMENT '', `id_route_map` INT(10) UNSIGNED NOT NULL COMMENT '', INDEX `fk_route_map_entry_id_list_config_bgp_idx` (`id_list_config_bgp` ASC), CONSTRAINT `fk_route_map_entry_id_list_config_bgp` FOREIGN KEY (`id_list_config_bgp`) REFERENCES `list_config_bgp` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, INDEX `fk_route_map_entry_id_route_map_idx` (`id_route_map` ASC), CONSTRAINT `fk_route_map_entry_id_route_map` FOREIGN KEY (`id_route_map`) REFERENCES `route_map` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, PRIMARY KEY (`id`))
CREATE TABLE `racks` ( `id_rack` int(11) NOT NULL AUTO_INCREMENT, `numero` int(11) NOT NULL, `nome` varchar(4) NOT NULL, `mac_sw1` varchar(17) DEFAULT NULL, `mac_sw2` varchar(17) DEFAULT NULL, `mac_ilo` varchar(17) DEFAULT NULL, `id_equip1` int(11) DEFAULT NULL, `id_equip2` int(11) DEFAULT NULL, `id_equip3` int(11) DEFAULT NULL, `config` tinyint(1) NOT NULL, `create_vlan_amb` tinyint(1) NOT NULL, PRIMARY KEY (`id_rack`), UNIQUE KEY `numero` (`numero`), UNIQUE KEY `nome` (`nome`))
CREATE TABLE `ambientevip` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `finalidade_txt` char(50) CHARACTER SET latin1 NOT NULL, `cliente_txt` char(50) CHARACTER SET latin1 NOT NULL, `ambiente_p44_txt` char(50) CHARACTER SET latin1 NOT NULL, `description` char(50) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `rule_content` ( `id_rule_content` int(10) NOT NULL AUTO_INCREMENT, `content` text NOT NULL, `order` int(10) NOT NULL, `id_rule` int(10) NOT NULL, PRIMARY KEY (`id_rule_content`), KEY `fk_rule_content_idx` (`id_rule`), CONSTRAINT `fk_rule_content` FOREIGN KEY (`id_rule`) REFERENCES `rule` (`id_rule`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `opcoespool_ambiente_xref` ( `id_opcaopool_ambiente_xref` int(11) NOT NULL AUTO_INCREMENT, `id_opcaopool` int(11) NOT NULL, `id_ambiente` int(10) unsigned NOT NULL, PRIMARY KEY (`id_opcaopool_ambiente_xref`), KEY `fk_opcoes_id_opcaopool_idx` (`id_opcaopool`), KEY `fk_opcoes_id_ambiente_idx` (`id_ambiente`), CONSTRAINT `fk_opcoes_id_opcaopool` FOREIGN KEY (`id_opcaopool`) REFERENCES `opcoespool` (`id_opcaopool`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_opcoes_id_ambiente` FOREIGN KEY (`id_ambiente`) REFERENCES `ambiente` (`id_ambiente`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `usuarios_do_grupo` ( `id_usuarios_do_grupo` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_user` int(10) unsigned NOT NULL, `id_grupo` int(10) unsigned NOT NULL, PRIMARY KEY (`id_usuarios_do_grupo`), UNIQUE KEY `uniq_id_user_id_grupo` (`id_user`,`id_grupo`), KEY `fk_users_do_grupo_users` (`id_user`), KEY `fk_users_do_grupo_grupos` (`id_grupo`), CONSTRAINT `fk_users_do_grupo_grupos` FOREIGN KEY (`id_grupo`) REFERENCES `grupos` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_users_do_grupo_users` FOREIGN KEY (`id_user`) REFERENCES `usuarios` (`id_user`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `auth_user_user_permissions` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `permission_id` integer NOT NULL, UNIQUE (`user_id`, `permission_id`))
CREATE TABLE `ambiente_rack` ( `id_ambienterack` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_ambiente` int(10) unsigned NOT NULL, `id_rack` int(10) NOT NULL, PRIMARY KEY (`id_ambienterack`), UNIQUE KEY `ambiente_rack_unique` (`id_ambiente`,`id_rack`), KEY `fk_ambiente_rack_ambiente` (`id_ambiente`), KEY `fk_ambiente_rack_rack` (`id_rack`), CONSTRAINT `fk_ambiente_rack_ambiente` FOREIGN KEY (`id_ambiente`) REFERENCES `ambiente` (`id_ambiente`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_ambiente_rack_rack` FOREIGN KEY (`id_rack`) REFERENCES `racks` (`id_rack`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `event_log` ( `id_evento` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_user` int(10) unsigned NOT NULL, `hora_evento` datetime NOT NULL, `evento` text NOT NULL, `resultado` int(11) NOT NULL, `acao` text, `funcionalidade` text, `parametro_anterior` text, `parametro_atual` text, `id_objeto` int(10) DEFAULT NULL, PRIMARY KEY (`id_evento`), KEY `fk_event_log_usuarios` (`id_user`), CONSTRAINT `fk_event_log_usuarios` FOREIGN KEY (`id_user`) REFERENCES `usuarios` (`id_user`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `ip_config` ( `id_ip_config` int(10) NOT NULL AUTO_INCREMENT, `subnet` varchar(45) NOT NULL, `new_prefix` varchar(3) NOT NULL, `type` enum('v6','v4') NOT NULL, `network_type` int(10) unsigned DEFAULT NULL, PRIMARY KEY (`id_ip_config`), KEY `fk_ip_config_1_idx` (`network_type`), KEY `fk_ip_config_tipo_rede` (`network_type`), CONSTRAINT `fk_ip_config_tipo_rede` FOREIGN KEY (`network_type`) REFERENCES `tipo_rede` (`id_tipo_rede`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_ip_config_network_type` FOREIGN KEY (`network_type`) REFERENCES `tipo_rede` (`id_tipo_rede`) ON UPDATE NO ACTION)
CREATE TABLE `opcoesvip_ambiente_xref` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_ambiente` int(10) unsigned NOT NULL, `id_opcoesvip` int(10) unsigned NOT NULL, PRIMARY KEY (`id`), KEY `fk_opcoesvip_ambiente_opcoesvip` (`id_opcoesvip`), KEY `fk_opcoesvip_ambiente_ambiente` (`id_ambiente`), CONSTRAINT `fk_opcoesvip_ambiente_ambiente` FOREIGN KEY (`id_ambiente`) REFERENCES `ambientevip` (`id`), CONSTRAINT `fk_opcoesvip_ambiente_opcoesvip` FOREIGN KEY (`id_opcoesvip`) REFERENCES `opcoesvip` (`id`))
CREATE TABLE `audit_request` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `request_id` varchar(255) NOT NULL, `ip` char(15) NOT NULL, `path` varchar(1024) NOT NULL, `date` datetime NOT NULL, `user_id` int(10) unsigned NOT NULL)
CREATE TABLE `healthcheck` ( `id_healthcheck` int(11) NOT NULL AUTO_INCREMENT, `identifier` varchar(200) DEFAULT NULL, `healthcheck_type` varchar(45) DEFAULT NULL, `healthcheck_request` varchar(500) DEFAULT NULL, `healthcheck_expect` varchar(200) DEFAULT NULL, `destination` varchar(45) DEFAULT NULL, PRIMARY KEY (`id_healthcheck`))
CREATE TABLE `dhcprelay_ipv6` ( `id_dhcprelay_ipv6` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_ipv6` int(10) unsigned NOT NULL, `id_networkipv6` int(10) unsigned NOT NULL, PRIMARY KEY (`id_dhcprelay_ipv6`), UNIQUE KEY `dhcprelayipv6_unique` (`id_ipv6`,`id_networkipv6`), KEY `fk_dhcprelay_ipv6_id_ip` (`id_ipv6`), KEY `fk_dhcprelay_ipv6_id_networkipv6` (`id_networkipv6`), CONSTRAINT `fk_dhcprelay_ipv6_id_ip` FOREIGN KEY (`id_ipv6`) REFERENCES `ipsv6` (`id_ipv6`) ON UPDATE CASCADE, CONSTRAINT `fk_dhcprelay_ipv6_id_networkipv6` FOREIGN KEY (`id_networkipv6`) REFERENCES `redeipv6` (`id`) ON UPDATE CASCADE)
CREATE TABLE `direitos_grupoequip` ( `id_direito` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_ugrupo` int(10) unsigned NOT NULL, `id_egrupo` int(10) unsigned NOT NULL, `leitura` char(1) NOT NULL, `escrita` char(1) NOT NULL, `alterar_config` char(1) NOT NULL, `exclusao` char(1) NOT NULL, PRIMARY KEY (`id_direito`), UNIQUE KEY `uniq_ugrupo_egrupo` (`id_ugrupo`,`id_egrupo`), KEY `fk_direitosg_ugrupos` (`id_ugrupo`), KEY `fk_direitosg_gequip` (`id_egrupo`), CONSTRAINT `fk_direitosg_gequip` FOREIGN KEY (`id_egrupo`) REFERENCES `grupos_equip` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_direitosg_ugrupos` FOREIGN KEY (`id_ugrupo`) REFERENCES `grupos` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `django_site` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `domain` varchar(100) NOT NULL, `name` varchar(50) NOT NULL)
CREATE TABLE `vlans` ( `id_vlan` int(10) unsigned NOT NULL AUTO_INCREMENT, `nome` varchar(50) CHARACTER SET latin1 NOT NULL, `num_vlan` int(10) unsigned NOT NULL, `id_ambiente` int(10) unsigned NOT NULL, `descricao` varchar(200) CHARACTER SET latin1 DEFAULT NULL, `acl_file_name` varchar(200) DEFAULT NULL, `acl_valida` tinyint(1) NOT NULL, `ativada` tinyint(4) NOT NULL DEFAULT '0', `acl_file_name_v6` varchar(200) DEFAULT NULL, `acl_valida_v6` tinyint(1) NOT NULL, `acl_draft` text, `acl_draft_v6` varchar(45) DEFAULT NULL, PRIMARY KEY (`id_vlan`), UNIQUE KEY `vlan_no_ambiente` (`id_ambiente`,`num_vlan`), UNIQUE KEY `nome_da_vlan_no_ambiente` (`nome`,`id_ambiente`), KEY `fk_vlans_ambiente` (`id_ambiente`), CONSTRAINT `fk_vlans_ambiente` FOREIGN KEY (`id_ambiente`) REFERENCES `ambiente` (`id_ambiente`) ON UPDATE CASCADE)
CREATE TABLE `optionspool_environment_xref` ( `id_optionspool_environment_xref` int(11) NOT NULL AUTO_INCREMENT, `id_optionspool` int(11) NOT NULL, `id_environment` int(10) unsigned NOT NULL, PRIMARY KEY (`id_optionspool_environment_xref`), KEY `fk_options_id_optionspool_idx` (`id_optionspool`), KEY `fk_options_id_environment_idx` (`id_environment`), UNIQUE KEY `optionspool_environment_unique` (`id_optionspool`,`id_environment`), CONSTRAINT `fk_options_id_optionspool` FOREIGN KEY (`id_optionspool`) REFERENCES `optionspool` (`id_optionspool`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `fk_options_id_environment` FOREIGN KEY (`id_environment`) REFERENCES `ambiente` (`id_ambiente`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `auth_user` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `username` varchar(30) NOT NULL UNIQUE, `first_name` varchar(30) NOT NULL, `last_name` varchar(30) NOT NULL, `email` varchar(75) NOT NULL, `password` varchar(128) NOT NULL, `is_staff` bool NOT NULL, `is_active` bool NOT NULL, `is_superuser` bool NOT NULL, `last_login` datetime NOT NULL, `date_joined` datetime NOT NULL)
CREATE TABLE `modelos` ( `id_modelo` int(10) unsigned NOT NULL AUTO_INCREMENT, `nome` varchar(100) CHARACTER SET latin1 NOT NULL, `id_marca` int(10) unsigned NOT NULL, PRIMARY KEY (`id_modelo`), UNIQUE KEY `modelo_marca_unicos` (`nome`,`id_marca`), KEY `fk_modelos_marcas` (`id_marca`), CONSTRAINT `fk_modelos_marcas` FOREIGN KEY (`id_marca`) REFERENCES `marcas` (`id_marca`) ON UPDATE CASCADE)
CREATE TABLE IF NOT EXISTS `tipo_interface` ( `id_tipo_interface` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, `tipo` VARCHAR(20) NOT NULL, PRIMARY KEY (`id_tipo_interface`), UNIQUE INDEX `tipo_unique` (`tipo` ASC))
CREATE TABLE `modelo_roteiro` ( `id_modelo_roteiro` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_roteiro` int(10) unsigned NOT NULL, `id_modelo` int(10) unsigned NOT NULL, PRIMARY KEY (`id_modelo_roteiro`), KEY `fk_modelo_roteiro_id_roteiro` (`id_roteiro`), KEY `fk_modelo_roteiro_id_modelo` (`id_modelo`), CONSTRAINT `fk_modelo_roteiro_id_roteiro` FOREIGN KEY (`id_roteiro`) REFERENCES `roteiros` (`id_roteiros`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_modelo_roteiro_id_modelo` FOREIGN KEY (`id_modelo`) REFERENCES `modelos` (`id_modelo`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `semaforo` ( `id_semaforo` int(5) unsigned NOT NULL, `descricao` varchar(50) COLLATE utf8_unicode_ci NOT NULL, PRIMARY KEY (`id_semaforo`))
CREATE TABLE `functionality` ( `functionality` varchar(50) NOT NULL, PRIMARY KEY (`functionality`))
CREATE TABLE `vip_request_port` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `id_vip_request` INT(11) UNSIGNED NULL COMMENT '', `port` INT(5) UNSIGNED NOT NULL COMMENT '', PRIMARY KEY (`id`), INDEX `fk_vip_request_pool_id_requisicao_vips_idx` (`id_vip_request` ASC), CONSTRAINT `fk_vip_request_pool_id_requisicao_vips` FOREIGN KEY (`id_vip_request`) REFERENCES `vip_request` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION)
CREATE TABLE `healthcheckexpect_healthcheck` ( `id_healthcheck` int(11) NOT NULL AUTO_INCREMENT, `identifier` varchar(200) NOT NULL, `healthcheck_type` varchar(45) NOT NULL, `healthcheck_request` varchar(500) NOT NULL, `healthcheck_expect` varchar(200) NOT NULL, `destination` varchar(45) NOT NULL, PRIMARY KEY (`id_healthcheck`))
CREATE TABLE `equipamentos` ( `id_equip` int(10) unsigned NOT NULL AUTO_INCREMENT, `id_tipo_equipamento` int(10) unsigned NOT NULL, `id_modelo` int(10) unsigned NOT NULL DEFAULT '1', `nome` varchar(50) NOT NULL, `maintenance` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id_equip`), UNIQUE KEY `nome` (`nome`), KEY `fk_equipamentos_tipo_equipamento` (`id_tipo_equipamento`), KEY `fk_equipamentos_modelos` (`id_modelo`), CONSTRAINT `fk_equipamentos_modelos` FOREIGN KEY (`id_modelo`) REFERENCES `modelos` (`id_modelo`) ON UPDATE CASCADE, CONSTRAINT `fk_equipamentos_tipo_equipamento` FOREIGN KEY (`id_tipo_equipamento`) REFERENCES `tipo_equipamento` (`id_tipo_equipamento`) ON UPDATE CASCADE)
CREATE TABLE `vip_request_port_optionsvip` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '', `id_vip_request_port` INT(11) UNSIGNED NULL COMMENT '', `id_opcoesvip` INT(10) UNSIGNED NULL COMMENT '', PRIMARY KEY (`id`), INDEX `vip_request_port_optionsvip_id_vip_request_idx` (`id_vip_request_port` ASC), INDEX `vip_request_port_optionsvip_id_opcoesvip_idx` (`id_opcoesvip` ASC), CONSTRAINT `vip_request_port_optionsvip_id_vip_request` FOREIGN KEY (`id_vip_request_port`) REFERENCES `vip_request_port` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION, CONSTRAINT `vip_request_port_optionsvip_id_opcoesvip` FOREIGN KEY (`id_opcoesvip`) REFERENCES `opcoesvip` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `tipo_acesso` ( `id_tipo_acesso` int(10) unsigned NOT NULL AUTO_INCREMENT, `protocolo` varchar(45) CHARACTER SET latin1 NOT NULL, PRIMARY KEY (`id_tipo_acesso`), UNIQUE KEY `protocolo` (`protocolo`))
CREATE TABLE `opcoesvip` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `tipo_opcao` char(50) CHARACTER SET latin1 NOT NULL, `nome_opcao_txt` char(50) CHARACTER SET latin1 NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `roteiros` ( `id_roteiros` int(10) unsigned NOT NULL AUTO_INCREMENT, `roteiro` varchar(40) CHARACTER SET latin1 NOT NULL, `id_tipo_roteiro` int(11) NOT NULL, `descricao` varchar(100) CHARACTER SET latin1 DEFAULT NULL, PRIMARY KEY (`id_roteiros`), UNIQUE KEY `roteiros_tipo_unico` (`roteiro`,`id_tipo_roteiro`), KEY `fk_roteiros_tipo_roteiro` (`id_tipo_roteiro`), CONSTRAINT `fk_roteiros_tipo_roteiro` FOREIGN KEY (`id_tipo_roteiro`) REFERENCES `tipo_roteiro` (`id_tipo_roteiro`) ON UPDATE CASCADE)
