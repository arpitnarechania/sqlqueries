CREATE TABLE `payments` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `purchase_id` INT(10) UNSIGNED NULL, `payment_id` VARCHAR(255) NOT NULL, `model` VARCHAR(20) NOT NULL, `status` VARCHAR(20) NOT NULL, `raw_response` TEXT, `is_deleted` INT(1) UNSIGNED NOT NULL, `created_at` DATETIME, `updated_at` DATETIME, PRIMARY KEY (`id`))
CREATE TABLE `purchase_items` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `brand_purchase_id` INT(10) UNSIGNED NULL, `reference_id` INT(10) UNSIGNED NULL, `reference_model` VARCHAR(40) NULL, `price` DECIMAL(10,2) NULL, `quantity` INT(11) NULL, `model` VARCHAR(255) NULL, `is_payable` INT(1) UNSIGNED NOT NULL, `is_discount` INT(1) UNSIGNED NOT NULL, `is_frozen` INT(1) UNSIGNED NOT NULL, `is_deleted` INT(1) UNSIGNED NOT NULL, `created_at` DATETIME, `updated_at` DATETIME, PRIMARY KEY (`id`))
CREATE TABLE `locations` ( `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, `short_name` varchar(10) NOT NULL, `type` varchar(100) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `brand_purchase_shippings` ( `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, `location_id` int(11) UNSIGNED NOT NULL, `brand_purchase_id` int(11) UNSIGNED NOT NULL, `is_frozen` tinyint(1) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `locations_branches` ( `ansestor_id` int(11) UNSIGNED NOT NULL, `descendant_id` int(11) UNSIGNED NOT NULL, `depth` int(11) UNSIGNED NOT NULL)
CREATE TABLE `shipping_methods` ( `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, `brand_id` int(11) UNSIGNED NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `brand_purchases` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `number` VARCHAR(40) NOT NULL, `brand_id` INT(10) UNSIGNED NULL, `purchase_id` INT(10) UNSIGNED NULL, `is_frozen` INT(1) UNSIGNED NOT NULL, `is_deleted` INT(1) UNSIGNED NOT NULL, `created_at` DATETIME, `updated_at` DATETIME, PRIMARY KEY (`id`))
CREATE TABLE `purchases` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `creator_id` INT(11) UNSIGNED NOT NULL, `billing_address_id` INT(11) UNSIGNED NOT NULL, `shipping_address_id` INT(11) UNSIGNED NOT NULL, `shipping_same_as_billing` INT(1) NOT NULL DEFAULT 0, `number` VARCHAR(40) NOT NULL, `currency` VARCHAR(3) NOT NULL, `monetary` TEXT, `is_frozen` INT(1) UNSIGNED NOT NULL DEFAULT 0, `is_deleted` INT(1) UNSIGNED NOT NULL DEFAULT 0, `created_at` DATETIME, `updated_at` DATETIME, PRIMARY KEY (`id`), KEY `fk_user_id` (`creator_id`))
CREATE TABLE `brands` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `name` VARCHAR(254) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `shippings` ( `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, `model` varchar(100) NOT NULL, `name` varchar(100) NOT NULL, `currency` varchar(3) NOT NULL, `processing_time` varchar(100) NOT NULL, `ships_from_id` int(11) UNSIGNED NOT NULL, `brand_id` int(11) UNSIGNED NOT NULL, `is_deleted` INT(1) UNSIGNED NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `brand_refund_items` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `brand_refund_id` INT(10) UNSIGNED NULL, `purchase_item_id` INT(10) UNSIGNED NULL, `amount` DECIMAL(10,2) NULL, `is_deleted` INT(1) UNSIGNED NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `products` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `name` VARCHAR(254) NOT NULL, `price` DECIMAL(10,2) NOT NULL, `currency` VARCHAR(3) NOT NULL, `brand_id` INT(10) UNSIGNED NULL, `shipping_id` INT(10) UNSIGNED NULL, PRIMARY KEY (`id`))
CREATE TABLE `shipping_groups` ( `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, `price` DECIMAL(10,2) NOT NULL, `additional_item_price` DECIMAL(10,2) NULL, `discount_threshold` DECIMAL(10,2) NULL, `delivery_time` varchar(100) NOT NULL, `shipping_id` int(11) UNSIGNED NOT NULL, `method_id` int(11) UNSIGNED NOT NULL, `location_id` int(11) UNSIGNED NOT NULL, `is_deleted` INT(1) UNSIGNED NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `users` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `email` VARCHAR(254) NOT NULL, `password` VARCHAR(64) NOT NULL, `logins` INT(10) UNSIGNED NOT NULL DEFAULT '0', `last_login` INT(10) UNSIGNED, `facebook_uid` VARCHAR(100), `twitter_uid` VARCHAR(100), `last_login_ip` VARCHAR(40), PRIMARY KEY (`id`), UNIQUE KEY `uniq_email` (`email`))
CREATE TABLE `shipping_items` ( `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, `model` varchar(100) NOT NULL, `purchase_item_id` int(11) UNSIGNED NULL, `shipping_group_id` int(11) UNSIGNED NULL, `total_delivery_time` varchar(100) NULL, `brand_purchase_shipping_id` int(11) UNSIGNED NOT NULL, `is_frozen` tinyint(1) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `addresses` ( `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, `country_id` int(11) UNSIGNED NULL, `city_id` int(11) UNSIGNED NULL, `email` varchar(100) NULL, `first_name` varchar(100) NULL, `last_name` varchar(100) NULL, `phone` varchar(100) NULL, `zip` varchar(100) NULL, `line1` varchar(100) NULL, `line2` varchar(100) NULL, `state` varchar(100) NULL, `fax` varchar(100) NULL, `is_deleted` int(1) NOT NULL DEFAULT 0, PRIMARY KEY (`id`))
CREATE TABLE `variations` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `name` VARCHAR(254) NOT NULL, `price` DECIMAL(10,2) NOT NULL, `product_id` INT(10) UNSIGNED NULL, PRIMARY KEY (`id`))
CREATE TABLE `brand_refunds` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `brand_purchase_id` INT(10) UNSIGNED NULL, `created_at` DATETIME, `raw_response` TEXT, `reason` TEXT, `is_deleted` INT(1) UNSIGNED NOT NULL, `status` VARCHAR(20) NOT NULL, PRIMARY KEY (`id`))
